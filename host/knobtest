#!/usr/bin/env python3.2
#
# knobtest - a test program for the knobterm box
#

import knobterm
import time

serial_port = "/dev/cu.usbserial-A700fjkF"
kt = knobterm.KnobTerm(serial_port)
v = kt.get_version()
print("version",v)

# erase screen
kt.erase(0x8)

# font scaling
kt.font_scale(False, False)
kt.write("normal\n")
kt.font_scale(True, False)
kt.write("dbl_x\n")
kt.font_scale(False, True)
kt.write("dbl_y\n")
kt.font_scale(True, True)
kt.write("dbl_xy\n")
kt.font_scale(False, False)

# font color
for a in range(16):
  kt.color_fg(a)
  kt.write('*')
kt.write('\n')
for a in range(16):
  kt.color(0,a)
  kt.write('#')
kt.write('\n')

# test gfx
kt.color_fg(0xf)
kt.draw_border(0, 0, 11, 4, 4)
kt.draw_rect('!', 1,12,4,4)

kt.color_fg(0xe)
kt.draw_border(1, 6, 11, 4, 4)
kt.draw_rect(' ', 7,12,4,4)

kt.color_fg(0xd)
kt.draw_border(2, 12, 11, 4, 4)
kt.draw_rect('o', 13,12,4,4)

kt.color_fg(0xc)
kt.draw_grid(0, 20,10, 4,4, 1, 1)

# movement
kt.goto(0,29)
kt.write("move")

# sync draw
for x in range(10):
  kt.goto(0,27)
  kt.write("%02d" % x)
  kt.goto(x,26)
  kt.write(" hello, world! ")
  kt.sync()
  time.sleep(0.1)

kt.close()
